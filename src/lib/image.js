(function(w){var breakpoints=[0,80,150,240,300,320,400,480,620,640,820,960,1200,1600];function tmpl(text,dict){for(var k in dict){text=text.replace("{{"+k+"}}",dict[k])}return text}w.picturefill=function(){var ps=w.document.getElementsByTagName("div");var imageData=[];for(var i=0,il=ps.length;i<il;i++){var el=ps[i];if(el.getAttribute("data-type")!=="image"){continue}var div=el.getElementsByTagName("div")[0];if(el.getAttribute("data-image-id")!==null){var id=el.getAttribute("data-image-id"),crop=el.getAttribute("data-crop");var _w=div.offsetWidth,_h=div.offsetHeight;if(!crop||crop===""||crop==="auto"){crop=computeAspectRatio(_w,_h)}if(el.getAttribute("data-format")){format=el.getAttribute("data-format")}else{format="jpg"}var width=50;for(var j=0;j<breakpoints.length;j++){if(_w<=breakpoints[j]){width=breakpoints[j];break}}if(w.devicePixelRatio){if(w.devicePixelRatio>1){}}var picImg=div.getElementsByTagName("img")[0];if(!picImg){picImg=w.document.createElement("img");picImg.alt=el.getAttribute("data-alt")}picImg.onload=function(){};if(width>0){if(typeof picImg.naturalWidth==="undefined"||picImg.naturalWidth<width||crop!==computeAspectRatio(picImg.naturalWidth,picImg.naturalHeight)){var id_str="";for(var ii=0;ii<id.length;ii++){if(ii%4===0){id_str+="/"}id_str+=id.charAt(ii)}var url=tmpl(w.IMAGE_URL,{id:id_str,crop:crop,width:width,format:format});imageData.push({div:div,img:picImg,url:url})}}}}for(var i=0;i<imageData.length;i++){var data=imageData[i];data.img.src=data.url;if(!data.img.parentNode){data.div.appendChild(data.img)}}};function computeAspectRatio(_w,_h){if(_w!==0&&_h!==0){var aspectRatio=Math.ceil(_w/_h*10);switch(aspectRatio){case 30:case 31:crop="3x1";break;case 20:crop="2x1";break;case 14:crop="4x3";break;case 18:crop="16x9";break;case 8:crop="3x4";break;case 10:crop="1x1";break;default:crop="original"}return crop}else{return"16x9"}}w.pictureFillElement=function(el){var div=el.getElementsByTagName("div")[0];if(el.getAttribute("data-image-id")!==null){var id=el.getAttribute("data-image-id"),crop=el.getAttribute("data-crop");var _w=div.offsetWidth,_h=div.offsetHeight;if(!crop||crop===""||crop==="auto"){crop=computeAspectRatio(_w,_h)}if(el.getAttribute("data-format")){format=el.getAttribute("data-format")}else{format="jpg"}var width=50;for(var j=0;j<breakpoints.length;j++){if(_w<=breakpoints[j]){width=breakpoints[j];break}}if(w.devicePixelRatio){if(w.devicePixelRatio>1){}}var picImg=div.getElementsByTagName("img")[0];if(!picImg){picImg=w.document.createElement("img");picImg.alt=el.getAttribute("data-alt");div.appendChild(picImg)}picImg.onload=function(){};if(width>0){if(typeof picImg.naturalWidth==="undefined"||picImg.naturalWidth<width||crop!==computeAspectRatio(picImg.naturalWidth,picImg.naturalHeight)){var id_str="";for(var i=0;i<id.length;i++){if(i%4===0){id_str+="/"}id_str+=id.charAt(i)}var url=tmpl(w.IMAGE_URL,{id:id_str,crop:crop,width:width,format:format});picImg.src=url}}}};if(!w.IMAGE_LISTENERS_DISABLED){if(w.addEventListener){var pictureFillTimeout;w.addEventListener("resize",function(){clearTimeout(pictureFillTimeout);pictureFillTimeout=setTimeout(w.picturefill,100)},false);w.addEventListener("DOMContentLoaded",function(){w.picturefill();w.removeEventListener("load",w.picturefill,false)},false);w.addEventListener("load",w.picturefill,false)}else if(w.attachEvent){w.attachEvent("onload",w.picturefill)}}})(this);